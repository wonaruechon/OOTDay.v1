# 3.1 Product Catalog Integration - Real Central Group Products

## Overview
Integrate real Central Group product data from JSON files into the OOTDay application to replace placeholder/mock data and display actual products in the middle layout.

## Current Issues Identified

### 1. **Data Source Mismatch**
- **Current State**: API route (`/app/api/products/route.ts`) looks for CSV files:
  - `/docs/Product_Men.csv`
  - `/docs/Product_Woman.csv`
- **Actual Data Location**: JSON files in `/products` directory:
  - `/products/central-women-dresses.json`
  - `/products/central-men-clothing.json`
- **Result**: API returns empty product array, causing placeholder data to display

### 2. **Data Structure Mismatch**
- **CSV Structure** (current API expects):
  ```
  Category, Sub-Category, Product ID (SKU), Product image, Product name, Brand,
  Description, Size, Original_Price, Current price, Sale link
  ```

- **JSON Structure** (actual data format):
  ```json
  {
    "products": [
      {
        "product_name": "...",
        "product_desc": "...",
        "product_link": "...",
        "product_size": "...",
        "product_price": "฿1,340",
        "product_image": "..."
      }
    ]
  }
  ```

### 3. **Missing Product Metadata**
JSON products are missing critical fields for the app:
- Category/Gender classification (men/women)
- Brand information
- SKU/Product ID
- Structured size data
- Numeric price values (currently strings with ฿ symbol)

### 4. **Display Issues**
From screenshots analysis:
- Outfit cards show generic placeholders: "Complete Look", "Stylish Ensemble", "Casual Look"
- Product images are gray circles (mockup placeholders)
- Prices like ฿2,985, ฿5,080, ฿13,890 are calculated from mock data
- No connection between displayed outfits and real Central Group inventory

## Product Data Sample

### Women's Products (central-women-dresses.json)
```json
{
  "product_name": "เดรสสำหรับผู้หญิง Fit & Flare Shape สีกรมท่า",
  "product_desc": "",
  "product_link": "https://www.central.co.th/th/women-clothing-...",
  "product_size": "",
  "product_price": "฿1,340",
  "product_image": "https://www.central.co.th/_next/image?url=..."
}
```

### Men's Products (central-men-clothing.json)
```json
{
  "product_name": "เสื้อโปโลผู้ชายลาคอสท์ รุ่นสลิมฟิต...",
  "product_desc": "",
  "product_link": "https://www.central.co.th/th/blue-men-s-...",
  "product_size": "",
  "product_price": "฿2,295",
  "product_image": "https://www.central.co.th/_next/image?url=..."
}
```

## Tasks to Complete

### Task 1: Update API Route to Load JSON Products
**File**: `/frontend/app/api/products/route.ts`

1. **Change data source path**:
   - Look for JSON files in `/products` directory instead of CSV in `/docs`
   - Load `central-women-dresses.json` and `central-men-clothing.json`

2. **Parse JSON structure**:
   - Read JSON files and parse product arrays
   - Extract product data from JSON structure

3. **Map JSON to Product type**:
   ```typescript
   {
     sku: generateSKU(product_link), // Extract from URL or generate
     name: product_name,
     brand: extractBrand(product_name), // Parse from name or URL
     price: parsePrice(product_price), // Convert "฿1,340" to 1340
     imageUrl: product_image,
     onlineUrl: product_link,
     category: detectGender(fileName), // "men" or "women" from file
     availability: "in_stock"
   }
   ```

4. **Add helper functions**:
   - `parsePrice(priceStr: string): number` - Convert "฿1,340" to 1340
   - `detectGender(fileName: string): string` - Determine from file name
   - `extractBrand(productName: string): string` - Parse brand from name
   - `generateSKU(url: string): string` - Extract or generate product ID

### Task 2: Enhance Product Data Processing
**Files**:
- `/frontend/lib/types.ts` (if needed)
- `/frontend/lib/utils/product-utils.ts` (enhance existing)

1. **Add category/gender detection**:
   - Parse from filename: "central-women-dresses" → "women"
   - Parse from filename: "central-men-clothing" → "men"

2. **Extract brand information**:
   - Parse from product name (e.g., "ลาคอสท์" = Lacoste)
   - Extract from URL patterns
   - Use default "Central" if not identifiable

3. **Price parsing**:
   - Remove ฿ symbol
   - Remove commas
   - Convert to number
   - Handle empty prices (some products have "")

4. **Size parsing**:
   - Parse size string if available
   - Default to common sizes if empty

### Task 3: Update Outfit Generation
**File**: `/frontend/lib/outfit-generator.ts`

1. **Validate product data**:
   - Ensure products have valid images
   - Filter out products without prices
   - Verify URLs are accessible

2. **Categorize products**:
   - Group by gender (men/women)
   - Categorize by product type (tops, bottoms, dresses, accessories)
   - Use product name/description for classification

3. **Smart outfit matching**:
   - Match men's products for men's outfits
   - Match women's products for women's outfits
   - Create appropriate combinations based on product types

### Task 4: Verify Display Integration
**Files**:
- `/frontend/components/outfit/OutfitCard.tsx`
- `/frontend/components/outfit/OutfitDiscovery.tsx`

1. **Display real product images**:
   - Use Next.js Image component with proper optimization
   - Handle Central.co.th image URLs correctly
   - Add fallback for failed image loads

2. **Show accurate product information**:
   - Display actual product names (Thai language support)
   - Show real prices from Central inventory
   - Link to actual Central.co.th product pages

3. **Update outfit metadata**:
   - Calculate total price from actual products
   - Show correct product count
   - Display real "In Stock" status

### Task 5: Test and Validate
1. **Verify data loading**:
   - Check API returns products correctly
   - Verify product count matches JSON files
   - Confirm both men's and women's products load

2. **Test outfit display**:
   - Confirm real product images appear
   - Validate prices are accurate
   - Test product links redirect to Central.co.th

3. **Check filtering**:
   - Verify gender filter works with categorized products
   - Test price range filter with real prices
   - Validate occasion filtering

4. **Responsive testing**:
   - Test on mobile, tablet, desktop
   - Verify images load properly across devices
   - Check Thai text displays correctly

## Expected Outcomes

### Before (Current State):
- ❌ Empty product array from API
- ❌ Placeholder outfit cards with mock data
- ❌ Gray circle mockup images
- ❌ Generic outfit names
- ❌ Calculated fake prices

### After (Desired State):
- ✅ Real Central Group products loaded from JSON
- ✅ Actual product images from Central.co.th
- ✅ Real product names in Thai
- ✅ Accurate prices from inventory
- ✅ Working links to Central.co.th product pages
- ✅ Gender-specific product categorization
- ✅ Smart outfit combinations from real inventory

## Technical Notes

### File Paths:
```
Project Root: /Users/naruechon/Documents/Project/OOTDay
Products: /Users/naruechon/Documents/Project/OOTDay/products
Frontend: /Users/naruechon/Documents/Project/OOTDay/frontend
```

### API Endpoint:
```
GET /api/products
Returns: { products: Product[], count: number }
```

### Image Optimization:
- Central.co.th images use Next.js image optimization
- URLs include query params: `?url=...&w=640&q=75`
- Need to configure Next.js for external image domain

### Language Support:
- Product names in Thai language
- Ensure UTF-8 encoding throughout
- Test Thai text rendering in UI components

## Priority
**CRITICAL** - This blocks the core functionality of displaying real products to users

## Dependencies
- Next.js 14 filesystem APIs
- JSON parsing (built-in)
- Image optimization configuration
- Type definitions for Product model
