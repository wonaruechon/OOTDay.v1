# Story 2.1 - Three-Panel Layout Proposal
## Stakeholder Presentation

**Date:** October 5, 2025
**Version:** 5.1 (Corrected)
**Presented by:** Development Team
**Decision Required:** Architecture approval for three-panel layout

---

## 📋 Executive Summary

**Proposal:** Evolve OOTDay's layout from 2 panels to 3 panels to improve outfit discovery while maintaining our core identity as an AI outfit assistant.

**Key Points:**
- ✅ Maintains "What should I wear today?" concept
- ✅ Enhances navigation and filtering UX
- ✅ Preserves Story 1.3's intent (dedicated outfit viewing)
- ✅ Improves user flow: Filter → Discover → Details → Purchase

**Decision Needed:** Approve three-panel architecture evolution

---

## 🎯 What We're Proposing

### Visual Layout

```
┌─────────────┬──────────────────────────┬─────────────────┐
│   Menu      │   Outfit Discovery       │  AI Chat        │
│   (20%)     │   (Home) (50%)          │  Assistant (30%)│
├─────────────┼──────────────────────────┼─────────────────┤
│             │                          │                 │
│ Navigation  │  🎨 Outfit Grid         │  💬 Chat        │
│ Filters     │  with search/filters     │  Recommendations│
│             │                          │                 │
│ Categories  │  [Outfit Card]          │  OR             │
│ - ทั้งหมด   │  [Outfit Card]          │                 │
│ - ผู้หญิง   │  [Outfit Card]          │  👔 Selected    │
│ - ผู้ชาย    │  [Outfit Card]          │  Outfit Details │
│             │                          │                 │
│ Occasions   │  Search: "หาชุดไปงาน"   │  with Buy Now   │
│ - งานออฟฟิศ │                          │  buttons        │
│ - เดท       │  "ดูชุด" → Details      │                 │
│ - ชิลๆ      │                          │                 │
│ - งานเลี้ยง  │                          │                 │
│             │                          │                 │
└─────────────┴──────────────────────────┴─────────────────┘
```

### User Experience Flow

1. **Filter** (Left Panel): Select category, occasion, price range
2. **Discover** (Middle Panel): Browse AI-curated outfit recommendations
3. **View Details** (Right Panel): See outfit breakdown or chat with AI
4. **Purchase** (Right Panel): Buy individual items → Central.co.th

---

## ✅ Why This Maintains Our Concept

### OOTDay Identity: AI Outfit Assistant

**Middle Panel Shows:**
- ✅ **Complete Outfits** (NOT individual products)
- ✅ **Styled Looks** for occasions (งานออฟฟิศ, เดท, งานเลี้ยง)
- ✅ **AI-Curated Combinations** from our 2,636-product catalog

**User Mental Model:**
- ✅ "I need an outfit for X occasion" (Styling mindset)
- ❌ NOT "I want to browse products" (Shopping mindset)

**Primary Actions:**
- ✅ "ดูชุด" (View Outfit) → See complete look details
- ❌ NOT "Shop Now" → Direct to external product pages

### Comparison: What We're NOT Doing

| ❌ Product Shopping Platform | ✅ OOTDay Outfit Assistant |
|------------------------------|----------------------------|
| Browse individual products | Browse complete outfits |
| Search by product name/brand | Search by occasion/style |
| "Shop Now" → External site | "ดูชุด" → Outfit details |
| E-commerce catalog | Styling recommendations |
| Add to cart flow | View outfit → Buy items |

---

## 🔄 Story 1.3 Evolution (Not Contradiction)

### Current Implementation (Story 1.3 - DONE)

```
┌──────────────────────────┬─────────────────────────┐
│   Chat Interface         │   Recommended Outfits   │
│   (50%)                  │   (50%)                 │
├──────────────────────────┼─────────────────────────┤
│                          │                         │
│ AI Chat Messages         │ [Outfit Card]          │
│                          │ [Outfit Card]          │
│ "ถามเรื่องชุดได้เลย..." │ [Outfit Card]          │
│                          │                         │
└──────────────────────────┴─────────────────────────┘
```
**Story 1.3 Intent:** "Give outfits dedicated viewing space"

### Proposed Evolution (Story 2.1 v5.1)

```
┌─────────────┬──────────────────────────┬─────────────────┐
│ Navigation  │   Outfit Discovery       │  Chat + Details │
│ & Filters   │   (50%)                  │   (30%)         │
│ (20%)       │                          │                 │
├─────────────┼──────────────────────────┼─────────────────┤
│             │                          │                 │
│ Filters     │ [Outfit Card]           │ Chat OR         │
│             │ [Outfit Card]           │ Selected Outfit │
│             │ [Outfit Card]           │ Details         │
│             │                          │                 │
└─────────────┴──────────────────────────┴─────────────────┘
```
**Story 2.1 Intent:** "Give outfits dedicated viewing space + Better filters"

### What Changed?
- ✅ **Preserved:** Outfits have dedicated space (still 50% width)
- ✅ **Enhanced:** Added filter panel on left for better UX
- ✅ **Improved:** Chat + Details combined in right panel
- ✅ **Same Goal:** Users can easily view and select outfits

**This is an Evolution, NOT a Contradiction**

Story 1.3 said "outfits on right side" → We interpret as "dedicated outfit viewing"
Story 2.1 says "outfits in middle" → Still dedicated (50% width), just better positioned

---

## 📊 Business Benefits

### Improved User Experience
1. **Faster Filtering:** Persistent left panel for quick occasion/style selection
2. **Focus on Outfits:** Middle panel (50%) gives primary attention to styled looks
3. **Dual-Purpose Right Panel:** Chat for questions OR Details when outfit selected
4. **Clear Purchase Path:** Outfit → Details → Buy items → Central.co.th

### Maintains Revenue Model
- ✅ Gender-specific Central.co.th URLs (Story 1.4) ✅ Implemented
- ✅ Buy Now buttons for each outfit item
- ✅ Total outfit price clearly displayed
- ✅ Alternative outfit suggestions to increase discovery

### Competitive Advantage
- ✅ **NOT another e-commerce site** (we're styling assistants)
- ✅ AI-curated complete looks (value-add over product browsing)
- ✅ Occasion-based discovery (solves "what to wear?" pain point)

---

## 🛠️ Technical Readiness

### Technical Status (Corrected v5.1)

**✅ Completed in v4.0:**
1. ✅ Correct field names identified: `imageUrl`, `name`, `price`, `items`
2. ✅ FilterState interface specified (see below)
3. ✅ Performance strategy documented (virtualization approach)
4. ✅ Code examples validated against codebase

**⚠️ Pending Implementation:**
1. ⚠️ Thai font (Noto Sans Thai) - NOT yet implemented, needs to be added
2. ⚠️ Virtualization library - react-window needs to be added to dependencies
3. ⚠️ Story 1.5 dependency - QA completion required before integration

### FilterState Interface Definition

```typescript
// lib/types.ts - To be added
export interface FilterState {
  gender?: 'all' | 'men' | 'women'
  occasion?: string[]  // ['work', 'casual', 'date', 'formal']
  priceRange?: { min: number; max: number }
  searchQuery?: string
}
```

### Mobile Responsive Strategy

**Desktop (≥1024px):** Three panels side-by-side
```
[Navigation 20%] [Outfits 50%] [Chat/Details 30%]
```

**Tablet (768-1023px):** Filter drawer + two panels
```
[Drawer: Filters] [Outfits 60%] [Chat/Details 40%]
```

**Mobile (<768px):** Single full-screen view with bottom tabs
```
┌─────────────────────┐
│                     │
│  Active Panel       │
│  (Filters/Outfits/  │
│   Chat)             │
│                     │
├─────────────────────┤
│ [🔍] [👕] [💬]     │  ← Bottom Tab Navigation
└─────────────────────┘
```
- Tab 1: Filters (full-screen modal)
- Tab 2: Outfit Grid (default)
- Tab 3: Chat/Details

### Implementation Timeline

**Revised Estimate: 4 weeks (20 days) with 1 developer** ⏱️

| Phase | Days | Deliverables |
|-------|------|--------------|
| **Phase 1:** Foundation | 1-4 | Layout structure, **Thai font implementation**, FilterState type, **virtualization library setup** |
| **Phase 2:** Left Panel | 5-6 | Navigation filters, categories, occasions |
| **Phase 3:** Middle Panel | 7-10 | Outfit grid, search, filter pills, **skeleton loaders**, **empty states** |
| **Phase 4:** Right Panel | 11-13 | Chat + Outfit details dual-purpose, **accessibility** |
| **Phase 5:** Interactivity | 14-15 | State management, filtering logic, **URL persistence** |
| **Phase 6:** Data Integration | 16-17 | Story 1.5 outfit generation + **buffer for QA fixes** |
| **Phase 7:** Testing & Polish | 18-20 | **Accessibility audit**, performance testing, QA, **error handling** |

**Target Launch:** November 2, 2025 (4 weeks from approval) 📅

**Timeline Changes from v5.0:**
- ✅ Added 5 days for: Thai font implementation, virtualization setup, Story 1.5 QA buffer, comprehensive testing
- ✅ More realistic for single developer
- ✅ Includes time for missing features (accessibility, empty states, error handling)

---

## ⚠️ What We Need to Decide

### Decision 1: Architecture Approval (Required)
**Question:** Approve three-panel layout evolution from Story 1.3's two-panel layout?

**Options:**
- ✅ **Approve:** Proceed with three-panel Outfit Discovery architecture
- ❌ **Reject:** Keep current two-panel layout (Story 1.3)

**Recommendation:** ✅ Approve - Better UX while maintaining concept

---

### Decision 2: Style Classification Strategy (Required)
**Problem:** CSV product catalog lacks "style" metadata (Work/Casual/Formal/Date) needed for filtering.

**Options:**

**Option A: Enhance CSV with Style Column** (Recommended)
```csv
Product_Name,Category,Price,Style
White Shirt,Women,1590,"work,casual"
Floral Dress,Women,2990,"date,casual"
Black Blazer,Women,3490,"work,formal"
```
- ✅ **Pros:** Accurate, human-curated, no ML complexity
- ⚠️ **Cons:** Requires manual tagging (2,636 products)

**Option B: Implement ML/Rule-Based Classifier**
```typescript
function classifyStyle(product: Product): string[] {
  if (product.name.includes('blazer')) return ['work', 'formal']
  if (product.name.includes('dress')) return ['date', 'formal']
  // ... more rules
}
```
- ✅ **Pros:** Automated, no CSV changes
- ⚠️ **Cons:** Less accurate, requires maintenance

**Recommendation:** Option A (CSV enhancement) for accuracy

---

### Decision 3: Virtualization Library (Technical)
**Problem:** Need to render 2,636 products without performance lag

**Options:**
- **Option A:** `react-window` - Lightweight, widely used
- **Option B:** `react-virtualized` - Feature-rich, larger bundle
- **Option C:** Native CSS + Pagination - No library, manual implementation

**Recommendation:** Option A (react-window) - Best balance of performance and simplicity

**Implementation Note:** Library needs to be added to `package.json` before development

---

### Decision 4: Story 1.5 Dependency Acknowledgment (Important)
**Status:** Story 1.5 (Outfit Generation) is "Ready for Review" but NOT marked "Done"

**Risk:**
- QA may find issues during Story 2.1 implementation
- Outfit generation bugs could block Phase 6 integration
- 2-3 day buffer added to timeline for potential fixes

**Decision Required:**
- [ ] Confirm Story 1.5 QA will be completed before Story 2.1 Phase 6 (Day 16)
- [ ] Acknowledge Story 1.5 as prerequisite dependency

---

## 📋 Pre-Implementation Checklist

Before development starts, we need:

### **Architecture Approval** ← TODAY'S DECISION
- [ ] Three-panel layout approved
- [ ] Story 1.3 evolution accepted (two → three panels)
- [ ] Confirm middle panel shows outfits, not products

### **Style Classification Decision** ← TODAY'S DECISION
- [ ] Choose Option A (CSV enhancement) OR
- [ ] Choose Option B (ML classifier)

### **Virtualization Library Decision** ← TODAY'S DECISION
- [ ] Choose Option A (react-window) OR
- [ ] Choose Option B (react-virtualized) OR
- [ ] Choose Option C (Native CSS + Pagination)

### **Story 1.5 Dependency** ← MUST CONFIRM
- [ ] Story 1.5 QA completion timeline confirmed
- [ ] Acknowledge as prerequisite for Phase 6
- [ ] Buffer time allocated for potential fixes

### **Technical Prep** (Days 1-2)
- [ ] Add Noto Sans Thai font to app/layout.tsx
- [ ] Add virtualization library to package.json
- [ ] Add FilterState interface to lib/types.ts
- [ ] Test Thai rendering

---

## 📈 Success Metrics

### User Experience Metrics
- ✅ Users find relevant outfits in <5 seconds (with filters)
- ✅ Outfit selection to purchase flow: 3 clicks max
- ✅ Mobile users can navigate all panels via tabs
- ✅ Thai text renders correctly on all devices

### Technical Metrics (Enhanced)
- ✅ **Page Load Time:** <2 seconds
- ✅ **First Contentful Paint (FCP):** <1.5 seconds
- ✅ **Largest Contentful Paint (LCP):** <2.5 seconds
- ✅ **Time to Interactive (TTI):** <3 seconds
- ✅ **Filter Response Time:** <100ms
- ✅ **Outfit Grid Render:** <300ms for 50 outfits
- ✅ **Lighthouse Accessibility:** ≥95
- ✅ **Zero TypeScript errors**
- ✅ **Test Coverage:** ≥80%

### Business Metrics
- ✅ Track outfit views → item purchases conversion
- ✅ Monitor Central.co.th referral clicks
- ✅ Measure outfit discovery engagement
- ✅ Track filter usage patterns
- ✅ A/B test: 2-panel vs 3-panel conversion rates

---

## 🔧 Quality & Edge Cases

### Accessibility Requirements (WCAG 2.1 AA)
- ✅ ARIA labels on all interactive elements
- ✅ Keyboard navigation: Tab, Enter, Escape, Arrow keys
- ✅ Focus visible indicators (2px outline)
- ✅ Screen reader announcements for filter changes
- ✅ Color contrast ≥4.5:1 for text
- ✅ Touch targets ≥44x44px on mobile

### Empty & Loading States
**Empty States:**
- No outfits match filters: "ไม่พบชุดที่ตรงกับเงื่อนไข ลองปรับตัวกรอง"
- No search results: "ไม่พบชุด ลองค้นหาด้วยคำอื่น"
- Outfit generation failed: "ไม่สามารถสร้างชุดได้ในขณะนี้ กรุณาลองใหม่"

**Loading States:**
- Skeleton screens for outfit cards during filtering
- Shimmer effect on loading skeletons
- Loading spinner for outfit generation
- Debounced search (300ms) to reduce excessive requests

### Error Handling
- Graceful degradation if outfit generation fails
- Fallback to cached outfits if API unavailable
- Error boundary to catch React errors
- Retry mechanism for failed requests
- User-friendly error messages in Thai

### Filter Persistence
- Save filter state to URL query params (`?gender=women&occasion=work`)
- Benefits: Shareable URLs, browser back/forward, bookmarks
- Implementation: Next.js `useSearchParams` + `useRouter`

---

## 🎬 Next Steps

### If Approved Today ✅

**Week 1 (Days 1-5):**
- Day 1-2: Kickoff, add Thai font, virtualization library, FilterState type
- Days 3-4: Build layout structure with three panels
- Day 5-6: Implement left navigation panel

**Week 2 (Days 7-13):**
- Days 7-10: Build middle outfit discovery panel (grid, search, empty states)
- Days 11-13: Implement right chat + details panel (accessibility focus)

**Week 3 (Days 14-17):**
- Days 14-15: Integrate interactivity and state management
- Days 16-17: Connect to outfit generation (Story 1.5) + QA buffer

**Week 4 (Days 18-20):**
- Days 18-20: Comprehensive testing, accessibility audit, polish, QA

**Target Launch:** November 2, 2025 (4 weeks from approval)

**Phased Rollout Options:**
- Week 1: Internal team testing
- Week 2: 10% of users (A/B test)
- Week 3: 50% of users
- Week 4: 100% rollout

### If Not Approved ❌

**Alternative Options:**
1. Keep current two-panel layout (Story 1.3)
2. Revise proposal based on feedback
3. Consider hybrid approach (tabs in existing layout)

---

## ❓ Q&A - Common Questions

### Q1: "Will this change our outfit assistant concept?"
**A:** No. Middle panel shows **complete outfits** (not products). We're enhancing layout while preserving the "What should I wear today?" focus.

### Q2: "Why not just add filters to current layout?"
**A:** Three panels provide better information hierarchy:
- Left: Persistent filters (always visible)
- Middle: Primary content (outfits - 50% width)
- Right: Context-sensitive (chat OR details)

Two-panel layout doesn't allow dedicated filter space.

### Q3: "Does this break Story 1.3?"
**A:** No. Story 1.3's intent was "dedicated outfit viewing" - this is preserved. We're moving outfits from right (50%) to middle (50%) for better UX. Same dedication, better position.

### Q4: "How long until users see this?"
**A:** 4 weeks after approval (November 2, 2025). We can phase rollout with feature flag if needed. **Updated from 3 weeks to reflect realistic timeline.**

### Q5: "What if we want to test before full launch?"
**A:** We can:
- Launch to 10% of users first (Week 2)
- Run A/B test (two-panel vs three-panel)
- Gather metrics before 100% rollout (Week 4)
- Use feature flag to control access

### Q6: "Why does the timeline need 4 weeks instead of 3?"
**A:** Frontend-dev agent identified:
- Thai font not yet implemented (needs implementation time)
- Virtualization library not in dependencies (needs setup)
- Story 1.5 QA buffer needed (not yet marked "Done")
- Accessibility, empty states, error handling require proper time
- 4 weeks is more realistic for quality delivery

### Q7: "What happens if Story 1.5 has issues during our Phase 6?"
**A:** We've added 2-day buffer (Days 16-17) for potential Story 1.5 fixes. If issues are severe, we can:
- Use fallback mock outfits temporarily
- Delay Phase 6 while Story 1.5 team fixes
- Continue with other testing in parallel

---

## 🔑 Decision Summary

### What We're Asking For:

1. ✅ **Approve three-panel layout architecture**
   - Navigation (left 20%) | Outfit Discovery (middle 50%) | Chat+Details (right 30%)

2. ✅ **Confirm Story 1.3 evolution is acceptable**
   - Outfits moved from right panel to middle panel (same 50% width)

3. ✅ **Choose style classification strategy**
   - Option A: CSV enhancement (recommended) OR Option B: ML classifier

4. ✅ **Choose virtualization library**
   - Option A: react-window (recommended) OR Option B: react-virtualized OR Option C: Native

5. ✅ **Acknowledge Story 1.5 dependency**
   - Confirm QA completion before our Phase 6 (Day 16)

### What You Get:

- ✅ Better outfit discovery UX
- ✅ Maintained outfit assistant concept
- ✅ Improved filtering and navigation
- ✅ Clear path to Central.co.th purchases
- ✅ **Realistic 4-week implementation timeline** (updated from 3 weeks)
- ✅ Comprehensive quality (accessibility, error handling, empty states)
- ✅ Mobile-responsive with bottom tab navigation

---

## 📝 Approval Sign-Off

**Story 2.1 v5.1 - Three-Panel Layout Redesign**

**Approved by:**

- [ ] Product Owner: _________________ Date: _______
- [ ] Business Stakeholder: _________________ Date: _______
- [ ] Tech Lead: _________________ Date: _______

**Decisions Made:**

1. Architecture Approval: [ ] Approved  [ ] Rejected  [ ] Revise
2. Style Strategy: [ ] Option A (CSV)  [ ] Option B (Classifier)
3. Virtualization Library: [ ] react-window  [ ] react-virtualized  [ ] Native CSS
4. Story 1.5 Dependency: [ ] QA completion confirmed  [ ] Needs clarification
5. Timeline: [ ] Approve 4 weeks  [ ] Request different timeline

**Notes/Conditions:**
_________________________________
_________________________________
_________________________________

---

## 📄 Version History

| Version | Date | Key Changes |
|---------|------|-------------|
| v5.0 | 2025-10-05 | Initial stakeholder presentation |
| **v5.1** | **2025-10-05** | **Corrected timeline (4 weeks), fixed Thai font status, added FilterState definition, clarified mobile UX, added Story 1.5 dependency, enhanced quality requirements** |

---

**Document prepared by:** Development Team (with Frontend-Dev Agent review)
**Date:** October 5, 2025
**Version:** 5.1 (Corrected)
**Next Review:** After approval decision
**Frontend-Dev Rating:** 7.5/10 → Conditional Approval with Revisions ✅
