# Story 1.2: Replace Product Modal with Inline Detail View - Brownfield Addition

## Status
Draft

## Story

**As a** user browsing products,
**I want** to view product details inline on the page instead of in a popup,
**so that** I have a more seamless browsing experience without modal interruptions.

## Story Context

**Existing System Integration:**
- Integrates with: `ProductModal.tsx` (current popup implementation)
- Technology: Next.js, React, Radix UI Dialog component
- Follows pattern: Inline layout similar to e-commerce product pages
- Touch points: All components that trigger product modal (OutfitCard, OutfitGrid)

## Acceptance Criteria

**Functional Requirements:**
1. Product details display inline on the page (not in popup/modal)
2. All existing product information remains visible (images, price, size, color, etc.)
3. User can view product details without modal overlay blocking other content

**Integration Requirements:**
4. Existing ProductModal component is refactored to inline component
5. All components that trigger product view updated to use new inline approach
6. Navigation between products maintains inline display pattern

**Quality Requirements:**
7. Layout is responsive and works on mobile/tablet/desktop
8. No loss of functionality from modal version
9. Smooth transitions when viewing different products

## Technical Notes

- **Integration Approach:** Refactor ProductModal.tsx to ProductDetail.tsx as inline component; update parent components to render inline instead of triggering modal
- **Existing Pattern Reference:** Current modal in `components/product/ProductModal.tsx`
- **Key Constraints:**
  - Must preserve all features: image gallery, size/color selection, quantity, buy buttons, store locations, accordion details
  - Remove Dialog/DialogContent wrappers
  - Update layout to fit inline within page flow

## Tasks / Subtasks

- [ ] Refactor ProductModal component (AC: 1, 2, 4)
  - [ ] Remove Dialog/DialogContent wrappers
  - [ ] Rename to ProductDetail.tsx
  - [ ] Adjust layout for inline display
  - [ ] Keep all existing features (image gallery, selections, etc.)
- [ ] Update parent components (AC: 5)
  - [ ] Update OutfitCard.tsx to use inline product display
  - [ ] Update OutfitGrid.tsx if applicable
  - [ ] Remove modal state management
- [ ] Responsive layout implementation (AC: 7)
  - [ ] Test on mobile viewport
  - [ ] Test on tablet viewport
  - [ ] Test on desktop viewport
  - [ ] Ensure all features accessible at all sizes
- [ ] Testing and validation (AC: 8, 9)
  - [ ] Verify all product features work inline
  - [ ] Test product navigation flow
  - [ ] Verify no regressions in functionality

## Dev Notes

**Relevant Source Tree:**
- `frontend/components/product/ProductModal.tsx` - Component to refactor (356 lines)
- `frontend/components/outfit/OutfitCard.tsx` - Triggers product modal
- `frontend/components/outfit/OutfitGrid.tsx` - May trigger product modal
- `frontend/components/ui/dialog.tsx` - Current Dialog component (to be removed from product view)

**Current Modal Structure:**
- Uses Radix UI Dialog component
- Grid layout with image on left, details on right (md:grid-cols-2)
- Features: image carousel, size/color selection, quantity, buy buttons, store locations, product details accordion, related products

**Inline Conversion Strategy:**
1. Remove `<Dialog>` and `<DialogContent>` wrappers
2. Convert to standard `<div>` container with appropriate styling
3. Remove `isOpen` and `onClose` props (no longer modal)
4. Update parent components to conditionally render inline instead of toggling modal state
5. Consider adding section navigation/breadcrumbs for better UX

### Testing

**Testing Standards:**
- Test file location: `frontend/components/product/__tests__/ProductDetail.test.tsx`
- Testing framework: Jest + React Testing Library
- Test requirements:
  - Component renders inline without Dialog wrapper
  - All interactive features work (size, color, quantity, buy)
  - Responsive layout at different breakpoints
  - Image carousel functions correctly
  - No accessibility regressions

## Risk and Compatibility

**Minimal Risk Assessment:**
- **Primary Risk:** Layout issues when converting from modal to inline; potential loss of features
- **Mitigation:** Systematic refactoring with feature-by-feature testing; keep original modal component as backup
- **Rollback:** Revert file changes and restore modal state management in parent components

**Compatibility Verification:**
- [x] No breaking changes to Product interface
- [x] Component refactoring only (no database changes)
- [x] All existing features preserved in inline format
- [x] Performance impact negligible (removes modal overhead)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-03 | 1.0 | Initial story creation | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
